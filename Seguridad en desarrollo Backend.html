<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.1-alpha.4/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.1-alpha.4/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.1-alpha.4/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Seguridad","children":[{"content":"Proteger contra ataques","children":[{"content":"Inyección SQL","children":[{"content":"<strong>Consultas preparadas</strong>: Usar consultas parametrizadas para evitar inyecciones SQL.","children":[{"content":"Ejemplo en Sequelize:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">const</span> user = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">User</span>.<span class=\"hljs-title function_\">findOne</span>({\n    <span class=\"hljs-attr\">where</span>: { <span class=\"hljs-attr\">email</span>: req.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">email</span> }\n});\n</code></pre>","children":[],"payload":{"lines":"6,12"}}],"payload":{"lines":"5,12"}},{"content":"<strong>Uso de ORM (Sequelize, TypeORM)</strong>: Herramientas que abstraen la construcción de consultas SQL.","children":[],"payload":{"lines":"12,14"}}],"payload":{"lines":"4,5"}},{"content":"XSS (Cross-Site Scripting)","children":[{"content":"<strong>Escapar y sanitizar entradas de usuario</strong>: Limpiar entradas para eliminar código malicioso.","children":[{"content":"Ejemplo de sanitización con <code>sanitize-html</code> en Express.js:<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> sanitizeHtml = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'sanitize-html'</span>);\n<span class=\"hljs-keyword\">const</span> sanitizedInput = <span class=\"hljs-title function_\">sanitizeHtml</span>(req.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">content</span>);\n</code></pre>","children":[],"payload":{"lines":"16,21"}}],"payload":{"lines":"15,21"}},{"content":"<strong>Uso de bibliotecas como DOMPurify</strong>: Para limpiar contenido HTML de forma segura.","children":[],"payload":{"lines":"21,23"}}],"payload":{"lines":"14,15"}},{"content":"CSRF (Cross-Site Request Forgery)","children":[{"content":"<strong>Uso de tokens CSRF</strong>: Generar un token único para cada sesión de usuario.","children":[{"content":"Ejemplo con <code>csurf</code> en Express.js:<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> csrf = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'csurf'</span>);\n<span class=\"hljs-keyword\">const</span> csrfProtection = <span class=\"hljs-title function_\">csrf</span>({ <span class=\"hljs-attr\">cookie</span>: <span class=\"hljs-literal\">true</span> });\n\napp.<span class=\"hljs-title function_\">use</span>(csrfProtection);\n</code></pre>","children":[],"payload":{"lines":"25,32"}}],"payload":{"lines":"24,32"}},{"content":"<strong>Middleware <code>csurf</code></strong>: Protege las rutas con tokens CSRF.","children":[],"payload":{"lines":"32,34"}}],"payload":{"lines":"23,24"}}],"payload":{"lines":"2,3"}},{"content":"Configurar CORS","children":[{"content":"<strong>Permitir orígenes confiables</strong>: Configurar para aceptar solo solicitudes de dominios específicos.","children":[{"content":"Ejemplo con <code>cors</code> en Express.js:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">const</span> cors = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'cors'</span>);\n\n<span class=\"hljs-keyword\">const</span> corsOptions = {\n    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-string\">'https://trustedorigin.com'</span>,\n    <span class=\"hljs-attr\">methods</span>: [<span class=\"hljs-string\">'GET'</span>, <span class=\"hljs-string\">'POST'</span>],\n    <span class=\"hljs-attr\">credentials</span>: <span class=\"hljs-literal\">true</span>,\n};\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">cors</span>(corsOptions));\n</code></pre>","children":[],"payload":{"lines":"36,48"}}],"payload":{"lines":"35,48"}},{"content":"<strong>Restricciones en métodos HTTP y encabezados</strong>.","children":[],"payload":{"lines":"48,50"}}],"payload":{"lines":"34,35"}},{"content":"Validar y sanitizar entradas","children":[{"content":"<strong>Validación con bibliotecas como Joi o Yup</strong>: Asegurar que los datos cumplen con el formato esperado.","children":[{"content":"Ejemplo de validación con Joi:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">Joi</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'joi'</span>);\n\n<span class=\"hljs-keyword\">const</span> userSchema = <span class=\"hljs-title class_\">Joi</span>.<span class=\"hljs-title function_\">object</span>({\n    <span class=\"hljs-attr\">username</span>: <span class=\"hljs-title class_\">Joi</span>.<span class=\"hljs-title function_\">string</span>().<span class=\"hljs-title function_\">alphanum</span>().<span class=\"hljs-title function_\">min</span>(<span class=\"hljs-number\">3</span>).<span class=\"hljs-title function_\">max</span>(<span class=\"hljs-number\">30</span>).required(),\n    <span class=\"hljs-attr\">email</span>: <span class=\"hljs-title class_\">Joi</span>.<span class=\"hljs-title function_\">string</span>().<span class=\"hljs-title function_\">email</span>().required(),\n    <span class=\"hljs-attr\">password</span>: <span class=\"hljs-title class_\">Joi</span>.<span class=\"hljs-title function_\">string</span>().<span class=\"hljs-title function_\">min</span>(<span class=\"hljs-number\">6</span>).required(),\n});\n\n<span class=\"hljs-keyword\">const</span> { error } = userSchema.<span class=\"hljs-title function_\">validate</span>(req.<span class=\"hljs-property\">body</span>);\n<span class=\"hljs-keyword\">if</span> (error) {\n    <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">400</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: error.<span class=\"hljs-property\">details</span>[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">message</span> });\n}\n</code></pre>","children":[],"payload":{"lines":"52,67"}}],"payload":{"lines":"51,67"}},{"content":"<strong>Sanitización de entradas</strong>: Limpiar entradas de usuario antes de almacenarlas.","children":[{"content":"Ejemplo de sanitización:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">const</span> sanitizedUsername = req.<span class=\"hljs-property\">body</span>.<span class=\"hljs-property\">username</span>.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/[^a-zA-Z0-9]/g</span>, <span class=\"hljs-string\">''</span>);\n</code></pre>","children":[],"payload":{"lines":"68,73"}}],"payload":{"lines":"67,73"}}],"payload":{"lines":"50,51"}},{"content":"Rate Limiting","children":[{"content":"<strong>Limitar el número de solicitudes por IP</strong>: Prevenir abusos y ataques de fuerza bruta.","children":[{"content":"Ejemplo con <code>express-rate-limit</code>:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">const</span> rateLimit = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express-rate-limit'</span>);\n\n<span class=\"hljs-keyword\">const</span> limiter = <span class=\"hljs-title function_\">rateLimit</span>({\n    <span class=\"hljs-attr\">windowMs</span>: <span class=\"hljs-number\">15</span> * <span class=\"hljs-number\">60</span> * <span class=\"hljs-number\">1000</span>,  <span class=\"hljs-comment\">// 15 minutos</span>\n    <span class=\"hljs-attr\">max</span>: <span class=\"hljs-number\">100</span>,  <span class=\"hljs-comment\">// Limitar cada IP a 100 solicitudes por ventana de tiempo</span>\n    <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'Demasiadas solicitudes desde esta IP, intente de nuevo más tarde.'</span>,\n});\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">'/api/'</span>, limiter);\n</code></pre>","children":[],"payload":{"lines":"75,87"}}],"payload":{"lines":"74,87"}},{"content":"<strong>Prevenir ataques de fuerza bruta y DoS</strong>.","children":[],"payload":{"lines":"87,88"}}],"payload":{"lines":"73,74"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
