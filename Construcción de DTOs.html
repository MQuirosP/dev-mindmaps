<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.3-alpha.1/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Construcción de un DTO en TypeScript","children":[{"content":"Definición y Uso de DTO","children":[{"content":"DTO: Objeto de Transferencia de Datos","children":[{"content":"Transporta información entre procesos y capas de la aplicación.","children":[],"payload":{"lines":"3,4"}},{"content":"Mantiene la separación de responsabilidades.","children":[],"payload":{"lines":"4,5"}},{"content":"Evita fugas de detalles internos de las entidades.","children":[],"payload":{"lines":"5,7"}}],"payload":{"lines":"2,7"}}],"payload":{"lines":"1,2"}},{"content":"Estructura Base","children":[{"content":"Crear una clase base que contenga métodos comunes (<code>DTOBase</code>).","children":[{"content":"<code>validate</code>: método común que usa <code>validateOrReject</code> para verificar las validaciones.","children":[],"payload":{"lines":"9,10"}},{"content":"<code>expectedKeys</code>: lista de llaves que el DTO espera recibir.","children":[],"payload":{"lines":"10,12"}}],"payload":{"lines":"8,12"}}],"payload":{"lines":"7,8"}},{"content":"Librerías y Decoradores","children":[{"content":"Importar decoradores desde <code>class-validator</code>","children":[{"content":"<code>@IsNotEmpty()</code>: indica que el campo no puede ser nulo o vacío.","children":[],"payload":{"lines":"14,15"}},{"content":"<code>@IsOptional()</code>: campo opcional que puede o no estar presente.","children":[],"payload":{"lines":"15,16"}},{"content":"<code>@IsString()</code>: valida que el tipo de dato sea un <code>string</code>.","children":[],"payload":{"lines":"16,17"}},{"content":"<code>@IsEmail()</code>: verifica que el campo tenga el formato correcto de correo electrónico.","children":[],"payload":{"lines":"17,18"}},{"content":"<code>@ValidateIf</code>: ejecuta validaciones solo si se cumple cierta condición.","children":[],"payload":{"lines":"18,19"}}],"payload":{"lines":"13,19"}},{"content":"Decoradores personalizados","children":[{"content":"<code>@Inmutable()</code>: decorador específico para marcar campos que no deben ser cambiados.","children":[],"payload":{"lines":"20,22"}}],"payload":{"lines":"19,22"}}],"payload":{"lines":"12,13"}},{"content":"Tipos de DTO","children":[{"content":"\n<p data-lines=\"23,24\"><code>ProviderCreateDTO</code></p>","children":[{"content":"DTO para la creación de proveedores.","children":[],"payload":{"lines":"24,25"}},{"content":"Campos y validaciones:","children":[{"content":"<code>provider_name</code>: requerido, string.","children":[],"payload":{"lines":"26,27"}},{"content":"<code>provider_address</code>: requerido, string.","children":[],"payload":{"lines":"27,28"}},{"content":"<code>provider_email</code>: requerido, email.","children":[],"payload":{"lines":"28,29"}},{"content":"<code>provider_phone</code>: requerido, string.","children":[],"payload":{"lines":"29,30"}},{"content":"<code>provider_dni</code>: requerido, string, único.","children":[],"payload":{"lines":"30,31"}},{"content":"Campos automáticos:","children":[{"content":"<code>provider_id</code>, <code>created_at</code>, <code>updated_at</code>, <code>purchases</code>: opcionales.","children":[],"payload":{"lines":"32,33"}}],"payload":{"lines":"31,33"}}],"payload":{"lines":"25,33"}},{"content":"Métodos:","children":[{"content":"<code>constructor</code>: toma un objeto <code>ProviderCreateDTO</code> y asigna sus propiedades.","children":[],"payload":{"lines":"34,35"}},{"content":"<code>validate()</code>: usa <code>validateOrReject</code> para verificar las validaciones definidas.","children":[],"payload":{"lines":"35,37"}}],"payload":{"lines":"33,37"}}],"payload":{"lines":"23,37"}},{"content":"\n<p data-lines=\"37,38\"><code>ProviderUpdateDTO</code></p>","children":[{"content":"DTO para la actualización parcial de proveedores.","children":[],"payload":{"lines":"38,39"}},{"content":"Campos opcionales con validaciones condicionales:","children":[{"content":"<code>provider_name</code>: opcional, string, no vacío.","children":[],"payload":{"lines":"40,41"}},{"content":"<code>provider_address</code>: opcional, string, no vacío.","children":[],"payload":{"lines":"41,42"}},{"content":"<code>provider_phone</code>: opcional, string, no vacío.","children":[],"payload":{"lines":"42,43"}},{"content":"<code>provider_email</code>: opcional, email, no vacío.","children":[],"payload":{"lines":"43,44"}},{"content":"<code>provider_dni</code>: opcional, string, inmutable.","children":[],"payload":{"lines":"44,45"}}],"payload":{"lines":"39,45"}},{"content":"Decorador <code>@ValidateIf</code>: verifica que el campo no sea <code>undefined</code> antes de aplicar validaciones.","children":[],"payload":{"lines":"45,46"}},{"content":"Decorador <code>@Inmutable</code>: no permite que se modifique <code>provider_dni</code>.","children":[],"payload":{"lines":"46,47"}},{"content":"Métodos:","children":[{"content":"<code>constructor</code>: toma un objeto <code>Partial&lt;ProviderUpdateDTO&gt;</code>.","children":[],"payload":{"lines":"48,49"}},{"content":"<code>validate()</code>: usa <code>validateOrReject</code>.","children":[],"payload":{"lines":"49,51"}}],"payload":{"lines":"47,51"}}],"payload":{"lines":"37,51"}},{"content":"\n<p data-lines=\"51,52\"><code>ProviderResponseDTO</code></p>","children":[{"content":"DTO de solo lectura para respuestas.","children":[],"payload":{"lines":"52,53"}},{"content":"Constructor toma una entidad <code>Provider</code> y extrae solo las propiedades relevantes.","children":[],"payload":{"lines":"53,54"}},{"content":"Campos:","children":[{"content":"<code>provider_name</code>, <code>provider_address</code>, <code>provider_phone</code>, <code>provider_email</code>, <code>provider_dni</code>.","children":[],"payload":{"lines":"55,57"}}],"payload":{"lines":"54,57"}}],"payload":{"lines":"51,57"}}],"payload":{"lines":"22,23"}},{"content":"Campos Inmutables","children":[{"content":"Uso del decorador <code>@Inmutable</code>","children":[{"content":"Restricción: evita cambios en campos específicos.","children":[],"payload":{"lines":"59,60"}},{"content":"Se usa para preservar integridad de datos (e.g., <code>provider_dni</code>).","children":[],"payload":{"lines":"60,62"}}],"payload":{"lines":"58,62"}}],"payload":{"lines":"57,58"}},{"content":"Validación y Transformación","children":[{"content":"Uso de <code>validateOrReject</code> en los DTOs para validaciones automáticas.","children":[],"payload":{"lines":"63,64"}},{"content":"Transformación de entidades a DTOs de respuesta (<code>ProviderResponseDTO</code>).","children":[],"payload":{"lines":"64,66"}}],"payload":{"lines":"62,63"}},{"content":"Decoradores Personalizados","children":[{"content":"Crear un decorador personalizado (<code>@Inmutable</code>) usando la sintaxis de TypeScript:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">import</span> { registerDecorator, <span class=\"hljs-title class_\">ValidationArguments</span>, <span class=\"hljs-title class_\">ValidationOptions</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"class-validator\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Inmutable</span>(<span class=\"hljs-params\">validationOptions?: <span class=\"hljs-title class_\">ValidationOptions</span></span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"><span class=\"hljs-attr\">object</span>: <span class=\"hljs-title class_\">Object</span>, <span class=\"hljs-attr\">propertyName</span>: <span class=\"hljs-built_in\">string</span></span>) {\n    <span class=\"hljs-title function_\">registerDecorator</span>({\n      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"isInmutable\"</span>,\n      <span class=\"hljs-attr\">target</span>: <span class=\"hljs-built_in\">object</span>.<span class=\"hljs-property\">constructor</span>,\n      <span class=\"hljs-attr\">propertyName</span>: propertyName,\n      <span class=\"hljs-attr\">options</span>: validationOptions,\n      <span class=\"hljs-attr\">validator</span>: {\n        <span class=\"hljs-title function_\">validate</span>(<span class=\"hljs-params\"><span class=\"hljs-attr\">value</span>: <span class=\"hljs-built_in\">any</span>, <span class=\"hljs-attr\">args</span>: <span class=\"hljs-title class_\">ValidationArguments</span></span>) {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>; <span class=\"hljs-comment\">// Siempre retorna falso para evitar cambios.</span>\n        },\n        <span class=\"hljs-title function_\">defaultMessage</span>(<span class=\"hljs-params\"></span>) {\n          <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"Field is inmutable and cannot be changed.\"</span>;\n        }\n      }\n    });\n  };\n}\n</code></pre>","children":[],"payload":{"lines":"67,89"}}],"payload":{"lines":"66,67"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
