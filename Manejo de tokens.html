<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.3-alpha.1/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Manejo de Tokens en la Aplicación","children":[{"content":"1. Backend","children":[{"content":"1.1. Generación de Tokens","children":[{"content":"\n<p data-lines=\"5,6\"><strong>Generar <code>accessToken</code></strong></p>","children":[{"content":"Se utiliza para autenticar solicitudes.","children":[],"payload":{"lines":"6,7"}},{"content":"Tiene un tiempo de expiración (ej. 15 minutos).","children":[],"payload":{"lines":"7,9"}}],"payload":{"lines":"5,9"}},{"content":"\n<p data-lines=\"9,10\"><strong>Generar <code>refreshToken</code></strong></p>","children":[{"content":"Se utiliza para obtener un nuevo <code>accessToken</code> sin reautenticación.","children":[],"payload":{"lines":"10,11"}},{"content":"Tiene un tiempo de expiración más largo (ej. 7 días).","children":[],"payload":{"lines":"11,13"}}],"payload":{"lines":"9,13"}}],"payload":{"lines":"4,5"}},{"content":"1.2. Validación de Tokens","children":[{"content":"\n<p data-lines=\"14,15\"><strong>Verificar <code>accessToken</code></strong></p>","children":[{"content":"Validar la autenticidad en cada solicitud.","children":[],"payload":{"lines":"15,17"}}],"payload":{"lines":"14,17"}},{"content":"\n<p data-lines=\"17,18\"><strong>Verificar <code>refreshToken</code></strong></p>","children":[{"content":"Asegurar que sea válido antes de generar un nuevo <code>accessToken</code>.","children":[],"payload":{"lines":"18,20"}}],"payload":{"lines":"17,20"}}],"payload":{"lines":"13,14"}},{"content":"1.3. Manejo de Logout","children":[{"content":"<strong>Al hacer logout:</strong>","children":[{"content":"Agregar <code>refreshToken</code> a la blacklist para invalidarlo.","children":[],"payload":{"lines":"22,24"}}],"payload":{"lines":"21,24"}}],"payload":{"lines":"20,21"}},{"content":"1.4. Método de Renovación","children":[{"content":"<strong>Endpoint para renovar <code>accessToken</code></strong>","children":[{"content":"Recibe <code>refreshToken</code>.","children":[],"payload":{"lines":"26,27"}},{"content":"Devuelve un nuevo <code>accessToken</code>.","children":[],"payload":{"lines":"27,29"}}],"payload":{"lines":"25,29"}}],"payload":{"lines":"24,25"}}],"payload":{"lines":"2,3"}},{"content":"2. Frontend","children":[{"content":"2.1. Almacenamiento de Tokens","children":[{"content":"<strong>Guardar <code>accessToken</code> y <code>refreshToken</code></strong>","children":[{"content":"Usar <code>localStorage</code> o <code>sessionStorage</code>.","children":[],"payload":{"lines":"35,37"}}],"payload":{"lines":"34,37"}}],"payload":{"lines":"33,34"}},{"content":"2.2. Detección de Expiración","children":[{"content":"<strong>Métodos de detección:</strong>","children":[{"content":"Almacenar el tiempo de expiración del <code>accessToken</code>.","children":[],"payload":{"lines":"39,40"}},{"content":"Manejar errores (ej. 401 Unauthorized).","children":[],"payload":{"lines":"40,42"}}],"payload":{"lines":"38,42"}}],"payload":{"lines":"37,38"}},{"content":"2.3. Renovación del <code>accessToken</code>","children":[{"content":"<strong>Método para renovar el token:</strong>","children":[{"content":"En caso de expiración, usar <code>refreshToken</code> para obtener un nuevo <code>accessToken</code>.","children":[],"payload":{"lines":"44,45"}},{"content":"Hacer una solicitud al endpoint de renovación.","children":[],"payload":{"lines":"45,47"}}],"payload":{"lines":"43,47"}}],"payload":{"lines":"42,43"}},{"content":"2.4. Reintento de Solicitudes","children":[{"content":"<strong>Lógica de reintento:</strong>","children":[{"content":"Si la solicitud falla por un <code>accessToken</code> expirado, renovar el token y volver a intentar la solicitud original.","children":[],"payload":{"lines":"49,51"}}],"payload":{"lines":"48,51"}}],"payload":{"lines":"47,48"}}],"payload":{"lines":"31,32"}},{"content":"3. Flujo de Trabajo","children":[{"content":"1. \n<p data-lines=\"54,55\"><strong>Inicio de sesión:</strong></p>","children":[{"content":"Usuario proporciona credenciales.","children":[],"payload":{"lines":"55,56"}},{"content":"Se generan y envían <code>accessToken</code> y <code>refreshToken</code>.","children":[],"payload":{"lines":"56,58"}}],"payload":{"lines":"54,58","listIndex":1}},{"content":"2. \n<p data-lines=\"58,59\"><strong>Uso del <code>accessToken</code>:</strong></p>","children":[{"content":"Usar en solicitudes a la API.","children":[],"payload":{"lines":"59,60"}},{"content":"Validar y manejar expiración.","children":[],"payload":{"lines":"60,62"}}],"payload":{"lines":"58,62","listIndex":2}},{"content":"3. \n<p data-lines=\"62,63\"><strong>Renovación del Token:</strong></p>","children":[{"content":"Al detectar expiración, solicitar nuevo <code>accessToken</code> usando <code>refreshToken</code>.","children":[],"payload":{"lines":"63,64"}},{"content":"Actualizar el <code>accessToken</code> almacenado.","children":[],"payload":{"lines":"64,66"}}],"payload":{"lines":"62,66","listIndex":3}},{"content":"4. \n<p data-lines=\"66,67\"><strong>Logout:</strong></p>","children":[{"content":"Al hacer logout, invalidar <code>refreshToken</code>.","children":[],"payload":{"lines":"67,68"}}],"payload":{"lines":"66,68","listIndex":4}}],"payload":{"lines":"53,54"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
