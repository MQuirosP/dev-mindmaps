<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"CORS y body-parser en Express","children":[{"content":"CORS","children":[{"content":"\n<p data-lines=\"3,4\"><strong>Qué es CORS</strong></p>","children":[{"content":"CORS (Cross-Origin Resource Sharing) es un mecanismo de seguridad que permite o restringe recursos solicitados en una página web desde otro dominio distinto al que sirvió el recurso.","children":[],"payload":{"lines":"4,5"}},{"content":"Protege a los usuarios al prevenir que una página web pueda hacer solicitudes a un dominio diferente sin permiso.","children":[],"payload":{"lines":"5,7"}}],"payload":{"lines":"3,7"}},{"content":"\n<p data-lines=\"7,8\"><strong>Configuración de CORS en Express</strong></p>","children":[{"content":"\n<p data-lines=\"8,9\">Instala el paquete:</p>\n<pre><code class=\"language-bash\">npm install cors\n</code></pre>","children":[],"payload":{"lines":"8,12"}},{"content":"\n<p data-lines=\"12,13\">Configuración básica de CORS:</p>\n<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">import</span> cors <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'cors'</span>;\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'express'</span>;\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// Permitir solicitudes desde cualquier origen</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">cors</span>());\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">'/'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">'Hello World!'</span>);\n});\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'Server running on port 3000'</span>);\n});\n</code></pre>","children":[],"payload":{"lines":"12,31"}},{"content":"\n<p data-lines=\"31,32\"><strong>Configuración avanzada de CORS</strong></p>","children":[{"content":"Permitir solo ciertos dominios, métodos y encabezados:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">import</span> cors <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'cors'</span>;\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'express'</span>;\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// Configuración avanzada de CORS</span>\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">cors</span>({\n  <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-string\">'http://example.com'</span>, <span class=\"hljs-comment\">// Permitir solo solicitudes desde este dominio</span>\n  <span class=\"hljs-attr\">methods</span>: [<span class=\"hljs-string\">'GET'</span>, <span class=\"hljs-string\">'POST'</span>],     <span class=\"hljs-comment\">// Permitir solo estos métodos</span>\n  <span class=\"hljs-attr\">allowedHeaders</span>: [<span class=\"hljs-string\">'Content-Type'</span>, <span class=\"hljs-string\">'Authorization'</span>], <span class=\"hljs-comment\">// Permitir solo estos encabezados</span>\n  <span class=\"hljs-attr\">credentials</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-comment\">// Permitir envío de cookies y encabezados de autorización</span>\n  <span class=\"hljs-attr\">exposedHeaders</span>: [<span class=\"hljs-string\">'Content-Length'</span>], <span class=\"hljs-comment\">// Permitir que el cliente lea estos encabezados</span>\n  <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-number\">86400</span> <span class=\"hljs-comment\">// Tiempo en segundos que el navegador debe cachear la respuesta CORS</span>\n}));\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">'/'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">'Hello World!'</span>);\n});\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'Server running on port 3000'</span>);\n});\n</code></pre>","children":[],"payload":{"lines":"32,58"}}],"payload":{"lines":"31,58"}}],"payload":{"lines":"7,58"}}],"payload":{"lines":"2,3"}},{"content":"body-parser","children":[{"content":"\n<p data-lines=\"59,60\"><strong>Qué es body-parser</strong></p>","children":[{"content":"<code>body-parser</code> es un middleware para Express que permite analizar los cuerpos de las solicitudes HTTP entrantes.","children":[],"payload":{"lines":"60,61"}},{"content":"Maneja el <code>req.body</code> de la solicitud para extraer datos JSON, urlencoded o texto plano.","children":[],"payload":{"lines":"61,63"}}],"payload":{"lines":"59,63"}},{"content":"\n<p data-lines=\"63,64\"><strong>Configuración de body-parser en Express</strong></p>","children":[{"content":"\n<p data-lines=\"64,65\">Instala el paquete:</p>\n<pre><code class=\"language-bash\">npm install body-parser\n</code></pre>","children":[],"payload":{"lines":"64,68"}},{"content":"\n<p data-lines=\"68,69\">Configuración básica de <code>body-parser</code>:</p>\n<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'express'</span>;\n<span class=\"hljs-keyword\">import</span> bodyParser <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'body-parser'</span>;\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// Middleware para analizar cuerpos de solicitudes JSON</span>\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-comment\">// Middleware para analizar cuerpos de solicitudes urlencoded</span>\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">urlencoded</span>({ <span class=\"hljs-attr\">extended</span>: <span class=\"hljs-literal\">true</span> }));\n\napp.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">'/data'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> {\n  <span class=\"hljs-comment\">// Accede a los datos del cuerpo de la solicitud</span>\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(req.<span class=\"hljs-property\">body</span>);\n  res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">'Data received'</span>);\n});\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">3000</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'Server running on port 3000'</span>);\n});\n</code></pre>","children":[],"payload":{"lines":"68,92"}},{"content":"\n<p data-lines=\"92,93\"><strong>Configuraciones avanzadas de body-parser</strong></p>","children":[{"content":"<strong>json()</strong>","children":[{"content":"Configurar límite de tamaño y manejo de errores:<pre><code class=\"language-typescript\">app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>({\n  <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-string\">'10mb'</span>, <span class=\"hljs-comment\">// Tamaño máximo de cuerpo de solicitud</span>\n  <span class=\"hljs-attr\">reviver</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">key, value</span>) =&gt;</span> value, <span class=\"hljs-comment\">// Función para transformar el cuerpo</span>\n  <span class=\"hljs-attr\">strict</span>: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// Asegura que solo se acepte JSON válido</span>\n}));\n</code></pre>","children":[],"payload":{"lines":"94,102"}}],"payload":{"lines":"93,102"}},{"content":"<strong>urlencoded()</strong>","children":[{"content":"Configurar límite de tamaño, manejo de errores y opciones:<pre><code class=\"language-typescript\">app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">urlencoded</span>({\n  <span class=\"hljs-attr\">extended</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-comment\">// Usa la librería qs para analizar datos urlencoded complejos</span>\n  <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-string\">'10mb'</span>, <span class=\"hljs-comment\">// Tamaño máximo de cuerpo de solicitud</span>\n  <span class=\"hljs-attr\">parameterLimit</span>: <span class=\"hljs-number\">10000</span> <span class=\"hljs-comment\">// Número máximo de parámetros en la solicitud</span>\n}));\n</code></pre>","children":[],"payload":{"lines":"103,112"}}],"payload":{"lines":"102,112"}}],"payload":{"lines":"92,112"}}],"payload":{"lines":"63,112"}}],"payload":{"lines":"58,59"}},{"content":"Ejemplos","children":[{"content":"\n<p data-lines=\"113,114\"><strong>Ejemplo básico de uso de CORS</strong></p>","children":[{"content":"Permitir solicitudes de cualquier origen:<pre><code class=\"language-typescript\">app.use(cors());\n</code></pre>","children":[],"payload":{"lines":"114,119"}}],"payload":{"lines":"113,119"}},{"content":"\n<p data-lines=\"119,120\"><strong>Ejemplo de uso avanzado de CORS</strong></p>","children":[{"content":"Permitir solo ciertos dominios, métodos y encabezados:<pre><code class=\"language-typescript\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-title function_\">cors</span>({\n  <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-string\">'http://example.com'</span>,\n  <span class=\"hljs-attr\">methods</span>: [<span class=\"hljs-string\">'GET'</span>, <span class=\"hljs-string\">'POST'</span>],\n  <span class=\"hljs-attr\">allowedHeaders</span>: [<span class=\"hljs-string\">'Content-Type'</span>, <span class=\"hljs-string\">'Authorization'</span>],\n  <span class=\"hljs-attr\">credentials</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">exposedHeaders</span>: [<span class=\"hljs-string\">'Content-Length'</span>],\n  <span class=\"hljs-attr\">maxAge</span>: <span class=\"hljs-number\">86400</span>\n}));\n</code></pre>","children":[],"payload":{"lines":"120,132"}}],"payload":{"lines":"119,132"}},{"content":"\n<p data-lines=\"132,133\"><strong>Ejemplo básico de uso de body-parser</strong></p>","children":[{"content":"Configurar para manejar JSON y datos urlencoded:<pre><code class=\"language-typescript\">app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>());\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">urlencoded</span>({ <span class=\"hljs-attr\">extended</span>: <span class=\"hljs-literal\">true</span> }));\n</code></pre>","children":[],"payload":{"lines":"133,139"}}],"payload":{"lines":"132,139"}},{"content":"\n<p data-lines=\"139,140\"><strong>Ejemplo avanzado de body-parser</strong></p>","children":[{"content":"Configurar límite de tamaño y opciones adicionales:<pre><code class=\"language-typescript\">app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>({\n  <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-string\">'10mb'</span>,\n  <span class=\"hljs-attr\">reviver</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">key, value</span>) =&gt;</span> value,\n  <span class=\"hljs-attr\">strict</span>: <span class=\"hljs-literal\">true</span>\n}));\n\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">urlencoded</span>({\n  <span class=\"hljs-attr\">extended</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">limit</span>: <span class=\"hljs-string\">'10mb'</span>,\n  <span class=\"hljs-attr\">parameterLimit</span>: <span class=\"hljs-number\">10000</span>\n}));\n</code></pre>","children":[],"payload":{"lines":"140,156"}}],"payload":{"lines":"139,156"}}],"payload":{"lines":"112,113"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
