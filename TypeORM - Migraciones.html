<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.0/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Creación y Aplicación de Migraciones","children":[{"content":"Paso 1: Preparación de la Base de Datos","children":[{"content":"<strong>Instalar PostgreSQL</strong>:","children":[{"content":"Descargar e instalar PostgreSQL desde el sitio oficial.","children":[],"payload":{"lines":"4,5"}},{"content":"<strong>Crear Base de Datos</strong>:","children":[{"content":"Comando para crear una base de datos:<pre><code class=\"language-sql\"><span class=\"hljs-keyword\">CREATE</span> DATABASE point_of_sale;\n</code></pre>","children":[],"payload":{"lines":"6,11"}}],"payload":{"lines":"5,11"}}],"payload":{"lines":"3,11"}}],"payload":{"lines":"2,3"}},{"content":"Paso 2: Configuración Inicial","children":[{"content":"\n<p data-lines=\"12,13\"><strong>Archivo <code>.env</code></strong>:</p>","children":[{"content":"Crea un archivo <code>.env</code> en la raíz del proyecto con las variables de entorno necesarias:<pre><code class=\"language-plaintext\">DB_USER=postgres\nDB_PASSWORD=admin\nDB_HOST=localhost\nDB_PORT=5432\nDB_NAME=point_of_sale\n</code></pre>","children":[],"payload":{"lines":"13,22"}}],"payload":{"lines":"12,22"}},{"content":"\n<p data-lines=\"22,23\"><strong>Configuración de <code>ormconfig.ts</code></strong>:</p>","children":[{"content":"Asegúrate de que <code>ormconfig.ts</code> esté configurado para conectar con tu base de datos:<pre><code class=\"language-typescript\"><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">DataSource</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'typeorm'</span>;\n<span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> dotenv <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'dotenv'</span>;\n\ndotenv.<span class=\"hljs-title function_\">config</span>();\n\n<span class=\"hljs-keyword\">const</span> dataSource = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">DataSource</span>({\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-string\">'postgres'</span>,\n  <span class=\"hljs-attr\">host</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_HOST</span>,\n  <span class=\"hljs-attr\">port</span>: <span class=\"hljs-built_in\">parseInt</span>(process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_PORT</span> || <span class=\"hljs-string\">'5432'</span>, <span class=\"hljs-number\">10</span>),\n  <span class=\"hljs-attr\">username</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_USER</span>,\n  <span class=\"hljs-attr\">password</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_PASSWORD</span>,\n  <span class=\"hljs-attr\">database</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_NAME</span>,\n  <span class=\"hljs-attr\">entities</span>: [], <span class=\"hljs-comment\">// Agregar entidades aquí</span>\n  <span class=\"hljs-attr\">migrations</span>: [<span class=\"hljs-string\">'./dist/migrations/*.js'</span>],\n  <span class=\"hljs-attr\">synchronize</span>: <span class=\"hljs-literal\">true</span>,\n});\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> dataSource;\n</code></pre>","children":[],"payload":{"lines":"23,45"}}],"payload":{"lines":"22,45"}}],"payload":{"lines":"11,12"}},{"content":"Paso 3: Crear Migraciones","children":[{"content":"<strong>Generar una Nueva Migración</strong>:","children":[{"content":"Usa el siguiente comando para generar una migración con un nombre descriptivo:<pre><code class=\"language-bash\">npx typeorm migration:generate -d ./dist/ormconfig.js -n NombreMigracion\n</code></pre>","children":[],"payload":{"lines":"47,51"}},{"content":"<strong>Ejemplo</strong>: Para una migración que agrega una tabla de usuarios:<pre><code class=\"language-bash\">npx typeorm migration:generate -d ./dist/ormconfig.js -n CreateUsersTable\n</code></pre>","children":[],"payload":{"lines":"51,56"}}],"payload":{"lines":"46,56"}}],"payload":{"lines":"45,46"}},{"content":"Paso 4: Aplicar Migraciones","children":[{"content":"\n<p data-lines=\"57,58\"><strong>Ejecutar Migraciones</strong>:</p>","children":[{"content":"Ejecuta las migraciones para aplicar cambios a la base de datos:<pre><code class=\"language-bash\">npx typeorm migration:run -d ./dist/ormconfig.js\n</code></pre>","children":[],"payload":{"lines":"58,63"}}],"payload":{"lines":"57,63"}},{"content":"\n<p data-lines=\"63,64\"><strong>Revertir Migraciones</strong> (si es necesario):</p>","children":[{"content":"Usa este comando para revertir la última migración:<pre><code class=\"language-bash\">npx typeorm migration:revert -d ./dist/ormconfig.js\n</code></pre>","children":[],"payload":{"lines":"64,69"}}],"payload":{"lines":"63,69"}}],"payload":{"lines":"56,57"}},{"content":"Paso 5: Configuración Adicional","children":[{"content":"<strong>Actualizar <code>package.json</code></strong>:","children":[{"content":"Agrega scripts para facilitar la ejecución de migraciones:<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"scripts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"migrate\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"npx typeorm migration:run -d ./dist/ormconfig.js\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"migrate:revert\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"npx typeorm migration:revert -d ./dist/ormconfig.js\"</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"lines":"71,79"}}],"payload":{"lines":"70,79"}}],"payload":{"lines":"69,70"}},{"content":"Paso 6: Verificación","children":[{"content":"<strong>Verificar la Aplicación de Migraciones</strong>:","children":[{"content":"Revisa la base de datos en PostgreSQL para confirmar los cambios realizados por la migración.","children":[],"payload":{"lines":"81,82"}},{"content":"Verifica la tabla de migraciones (<code>typeorm_migrations</code> por defecto) para asegurarte de que se hayan aplicado correctamente.","children":[],"payload":{"lines":"82,84"}}],"payload":{"lines":"80,84"}}],"payload":{"lines":"79,80"}},{"content":"Paso 7: Resolución de Problemas","children":[{"content":"<strong>Errores Comunes</strong>:","children":[{"content":"<strong>Conexión a la Base de Datos</strong>: Asegúrate de que las credenciales y configuración en el archivo <code>.env</code> sean correctas.","children":[],"payload":{"lines":"86,87"}},{"content":"<strong>Errores en Migraciones</strong>: Revisa los archivos de migración generados y corrige cualquier error de sintaxis o lógica.","children":[],"payload":{"lines":"87,90"}}],"payload":{"lines":"85,90"}}],"payload":{"lines":"84,85"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
