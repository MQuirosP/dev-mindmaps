<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.3-alpha.1/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Mapa Mental: Configuración de Docker para el Proyecto","children":[{"content":"1. <strong>Instalación de Docker</strong>","children":[{"content":"<strong>Instalación en Windows:</strong>","children":[{"content":"Descargar Docker Desktop desde <a href=\"https://www.docker.com/products/docker-desktop\">Docker Hub</a>.","children":[],"payload":{"lines":"4,5"}},{"content":"Instalar y configurar Docker Desktop.","children":[],"payload":{"lines":"5,6"}},{"content":"Verificar la instalación con el comando:<pre><code class=\"language-bash\">docker --version\n</code></pre>","children":[],"payload":{"lines":"6,10"}}],"payload":{"lines":"3,10"}},{"content":"<strong>Instalación en Mac/Linux:</strong>","children":[{"content":"Seguir la guía oficial de instalación para <a href=\"https://docs.docker.com/docker-for-mac/install/\">Mac</a> o <a href=\"https://docs.docker.com/engine/install/\">Linux</a>.","children":[],"payload":{"lines":"11,13"}}],"payload":{"lines":"10,13"}}],"payload":{"lines":"2,3"}},{"content":"2. <strong>Estructura del Proyecto</strong>","children":[{"content":"<strong>Carpetas y Archivos Creados:</strong>","children":[{"content":"<strong>Carpeta <code>backend</code>:</strong> Contiene la API del servidor.","children":[],"payload":{"lines":"15,16"}},{"content":"<strong>Carpeta <code>frontend</code>:</strong> Contiene la parte del cliente Angular.","children":[],"payload":{"lines":"16,17"}},{"content":"<strong>Carpeta <code>db_data</code>:</strong> Volumen persistente de datos de PostgreSQL.","children":[],"payload":{"lines":"17,18"}},{"content":"<strong>Archivo <code>docker-compose.yml</code>:</strong> Define los servicios (API y DB) para Docker.","children":[],"payload":{"lines":"18,19"}},{"content":"<strong>Archivo <code>Dockerfile</code>:</strong> Define cómo construir la imagen del contenedor de la API.","children":[],"payload":{"lines":"19,21"}}],"payload":{"lines":"14,21"}}],"payload":{"lines":"13,14"}},{"content":"3. <strong>Configuración del Docker Compose</strong>","children":[{"content":"\n<p data-lines=\"22,23\"><strong>Definición de Servicios en <code>docker-compose.yml</code>:</strong></p>","children":[{"content":"<strong>Servicio <code>db</code>:</strong> Contenedor de PostgreSQL.","children":[{"content":"<strong>Configuración:</strong>","children":[{"content":"<code>image: postgres:17</code>: Utiliza la imagen oficial de PostgreSQL.","children":[],"payload":{"lines":"25,26"}},{"content":"<code>POSTGRES_USER</code>, <code>POSTGRES_PASSWORD</code>, <code>POSTGRES_DB</code>: Variables de entorno para configurar el usuario, contraseña y base de datos.","children":[],"payload":{"lines":"26,27"}},{"content":"<code>volumes</code>: Mantiene los datos persistentes de la base de datos.","children":[],"payload":{"lines":"27,28"}},{"content":"<code>ports: \"5432:5432\"</code>: Mapea el puerto 5432 del contenedor al puerto 5432 del host.","children":[],"payload":{"lines":"28,29"}}],"payload":{"lines":"24,29"}}],"payload":{"lines":"23,29"}},{"content":"<strong>Servicio <code>api</code>:</strong> Contenedor de la API Node.js.","children":[{"content":"<strong>Configuración:</strong>","children":[{"content":"<code>build: ./backend</code>: Construye la imagen a partir de la carpeta <code>backend</code>.","children":[],"payload":{"lines":"31,32"}},{"content":"<code>environment</code>: Variables de entorno para la configuración de la base de datos.","children":[],"payload":{"lines":"32,33"}},{"content":"<code>depends_on: db</code>: Asegura que el contenedor <code>api</code> dependa de <code>db</code> (PostgreSQL).","children":[],"payload":{"lines":"33,34"}},{"content":"<code>ports: \"3000:3000\"</code>: Mapea el puerto 3000 del contenedor al puerto 3000 del host.","children":[],"payload":{"lines":"34,36"}}],"payload":{"lines":"30,36"}}],"payload":{"lines":"29,36"}}],"payload":{"lines":"22,36"}},{"content":"\n<p data-lines=\"36,37\"><strong>Archivo <code>docker-compose.yml</code> Completo:</strong></p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">'3'</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">db:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">postgres:17</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">postgres_db</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-attr\">POSTGRES_USER:</span> <span class=\"hljs-string\">postgres</span>\n      <span class=\"hljs-attr\">POSTGRES_PASSWORD:</span> <span class=\"hljs-string\">3az5bkhr</span>\n      <span class=\"hljs-attr\">POSTGRES_DB:</span> <span class=\"hljs-string\">verduleria_db</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db_data:/var/lib/postgresql/data</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"5432:5432\"</span>\n\n  <span class=\"hljs-attr\">api:</span>\n    <span class=\"hljs-attr\">build:</span>\n      <span class=\"hljs-attr\">context:</span> <span class=\"hljs-string\">./backend</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">node-api</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-attr\">DATABASE_HOST:</span> <span class=\"hljs-string\">db</span>\n      <span class=\"hljs-attr\">DATABASE_USER:</span> <span class=\"hljs-string\">postgres</span>\n      <span class=\"hljs-attr\">DATABASE_PASSWORD:</span> <span class=\"hljs-string\">3az5bkhr</span>\n      <span class=\"hljs-attr\">DATABASE_NAME:</span> <span class=\"hljs-string\">verduleria_db</span>\n      <span class=\"hljs-attr\">DATABASE_PORT:</span> <span class=\"hljs-number\">5432</span>\n      <span class=\"hljs-attr\">NODE_ENV:</span> <span class=\"hljs-string\">production</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"3000:3000\"</span>\n    <span class=\"hljs-attr\">depends_on:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db</span>\n\n<span class=\"hljs-attr\">volumes:</span>\n  <span class=\"hljs-attr\">db_data:</span>\n</code></pre>","children":[],"payload":{"lines":"36,72"}}],"payload":{"lines":"21,22"}},{"content":"4. <strong>Configuración del Dockerfile</strong>","children":[{"content":"<strong>Definición del Dockerfile para la API:</strong>","children":[{"content":"\n<p data-lines=\"74,75\"><strong>Archivos Necesarios:</strong> <code>package.json</code> y código de la API.</p>","children":[],"payload":{"lines":"74,75"}},{"content":"\n<p data-lines=\"75,76\"><strong>Pasos:</strong></p>","children":[{"content":"1. <strong>Establecer la imagen base:</strong><pre><code class=\"language-Dockerfile\">FROM node:20\n</code></pre>","children":[],"payload":{"lines":"76,80","listIndex":1}},{"content":"2. <strong>Configurar el directorio de trabajo:</strong><pre><code class=\"language-Dockerfile\">WORKDIR /app\n</code></pre>","children":[],"payload":{"lines":"80,84","listIndex":2}},{"content":"3. <strong>Copiar el archivo <code>package.json</code> y las dependencias:</strong><pre><code class=\"language-Dockerfile\">COPY package*.json ./\nRUN npm install\n</code></pre>","children":[],"payload":{"lines":"84,89","listIndex":3}},{"content":"4. <strong>Copiar el código de la API:</strong><pre><code class=\"language-Dockerfile\">COPY . .\n</code></pre>","children":[],"payload":{"lines":"89,93","listIndex":4}},{"content":"5. <strong>Comando para ejecutar la API:</strong><pre><code class=\"language-Dockerfile\">CMD [\"node\", \"app.js\"]\n</code></pre>","children":[],"payload":{"lines":"93,98","listIndex":5}}],"payload":{"lines":"75,98"}},{"content":"\n<p data-lines=\"98,99\"><strong>Archivo <code>Dockerfile</code> Completo:</strong></p>\n<pre><code class=\"language-Dockerfile\">FROM node:20\n\nWORKDIR /app\n\nCOPY package*.json ./\nRUN npm install\n\nCOPY . .\n\nCMD [\"node\", \"app.js\"]\n</code></pre>","children":[],"payload":{"lines":"98,112"}}],"payload":{"lines":"73,112"}}],"payload":{"lines":"72,73"}},{"content":"5. <strong>Variables de Entorno</strong>","children":[{"content":"\n<p data-lines=\"113,114\"><strong>Configuración de Variables en <code>docker-compose.yml</code>:</strong></p>","children":[{"content":"<strong><code>DATABASE_HOST</code></strong>: El host de la base de datos (<code>db</code>, el nombre del contenedor de PostgreSQL).","children":[],"payload":{"lines":"114,115"}},{"content":"<strong><code>DATABASE_USER</code></strong>: El usuario de la base de datos (<code>postgres</code>).","children":[],"payload":{"lines":"115,116"}},{"content":"<strong><code>DATABASE_PASSWORD</code></strong>: La contraseña de la base de datos (<code>3az5bkhr</code>).","children":[],"payload":{"lines":"116,117"}},{"content":"<strong><code>DATABASE_NAME</code></strong>: El nombre de la base de datos (<code>verduleria_db</code>).","children":[],"payload":{"lines":"117,118"}},{"content":"<strong><code>DATABASE_PORT</code></strong>: El puerto de la base de datos (<code>5432</code>).","children":[],"payload":{"lines":"118,119"}},{"content":"<strong><code>NODE_ENV</code></strong>: Define el entorno de ejecución (ej. <code>production</code>).","children":[],"payload":{"lines":"119,120"}},{"content":"<strong><code>APP_PORT</code></strong>: El puerto de la API Node.js (<code>3000</code>).","children":[],"payload":{"lines":"120,122"}}],"payload":{"lines":"113,122"}},{"content":"\n<p data-lines=\"122,123\"><strong>Configuración en <code>.env</code> para la API (si se usa):</strong></p>\n<pre><code class=\"language-env\">DATABASE_URL=postgres://postgres:3az5bkhr@db:5432/verduleria_db\n</code></pre>","children":[],"payload":{"lines":"122,127"}}],"payload":{"lines":"112,113"}},{"content":"6. <strong>Ejecución de Docker Compose</strong>","children":[{"content":"\n<p data-lines=\"128,129\"><strong>Levantar los Servicios:</strong></p>","children":[{"content":"Para construir y levantar los contenedores de la base de datos y la API:<pre><code class=\"language-bash\">docker-compose up --build\n</code></pre>","children":[],"payload":{"lines":"129,133"}},{"content":"Para levantar solo la API (sin la base de datos):<pre><code class=\"language-bash\">docker-compose up api\n</code></pre>","children":[],"payload":{"lines":"133,138"}}],"payload":{"lines":"128,138"}},{"content":"\n<p data-lines=\"138,139\"><strong>Verificar los Contenedores:</strong></p>","children":[{"content":"Verifica que los contenedores estén corriendo con:<pre><code class=\"language-bash\">docker ps\n</code></pre>","children":[],"payload":{"lines":"139,144"}}],"payload":{"lines":"138,144"}}],"payload":{"lines":"127,128"}},{"content":"7. <strong>Solución de Problemas</strong>","children":[{"content":"<strong>Problema de Conexión entre Contenedores:</strong>","children":[{"content":"Asegúrate de usar <code>db</code> como nombre de host de la base de datos en el contenedor de la API, ya que <code>db</code> es el nombre del servicio en <code>docker-compose.yml</code>.","children":[],"payload":{"lines":"146,147"}}],"payload":{"lines":"145,147"}},{"content":"<strong>Error de Puerto:</strong>","children":[{"content":"Si el contenedor de la API no se conecta correctamente, verifica que el puerto 3000 esté mapeado correctamente y no esté siendo utilizado por otro proceso en el host.","children":[],"payload":{"lines":"148,150"}}],"payload":{"lines":"147,150"}}],"payload":{"lines":"144,145"}},{"content":"8. <strong>Notas Finales</strong>","children":[{"content":"<strong>Persistencia de Datos en Docker:</strong>","children":[{"content":"El volumen <code>db_data</code> asegura que los datos de la base de datos persistan incluso si los contenedores se reinician o eliminan.","children":[],"payload":{"lines":"152,153"}}],"payload":{"lines":"151,153"}},{"content":"<strong>Acceso a la Base de Datos:</strong>","children":[{"content":"Si necesitas conectarte a la base de datos desde el contenedor, utiliza:<pre><code class=\"language-bash\">psql -h db -U postgres -d verduleria_db\n</code></pre>","children":[],"payload":{"lines":"154,158"}},{"content":"O desde el host, usando <code>localhost</code> o <code>host.docker.internal</code> dependiendo del sistema operativo.","children":[],"payload":{"lines":"158,160"}}],"payload":{"lines":"153,160"}}],"payload":{"lines":"150,151"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
