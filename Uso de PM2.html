<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.1-alpha.4/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.1-alpha.4/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.1-alpha.4/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"PM2: Gestor de Procesos para Node.js","children":[{"content":"Instalación y Configuración","children":[{"content":"<strong>Global:</strong> <code>npm install -g pm2</code>","children":[],"payload":{"lines":"3,4"}},{"content":"<strong>Local:</strong> <code>npm install pm2 --save-dev</code>","children":[],"payload":{"lines":"4,5"}},{"content":"<strong>Archivo de configuración:</strong> <code>ecosystem.config.js</code>","children":[{"content":"Ejemplo: Configurar múltiples procesos, ambientes, watch, y scripts post-deploy","children":[],"payload":{"lines":"6,7"}},{"content":"\n<pre><code class=\"language-javascript\"> <span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = {\n   <span class=\"hljs-attr\">apps</span>: [\n     {\n       <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">'my-app'</span>,\n       <span class=\"hljs-attr\">script</span>: <span class=\"hljs-string\">'app.js'</span>,\n       <span class=\"hljs-attr\">watch</span>: [<span class=\"hljs-string\">'src'</span>],\n       <span class=\"hljs-attr\">env</span>: {\n         <span class=\"hljs-attr\">NODE_ENV</span>: <span class=\"hljs-string\">'development'</span>\n       },\n       <span class=\"hljs-attr\">env_production</span>: {\n         <span class=\"hljs-attr\">NODE_ENV</span>: <span class=\"hljs-string\">'production'</span>\n       },\n       <span class=\"hljs-attr\">post_deploy</span>: <span class=\"hljs-string\">'npm install &amp;&amp; pm2 reload ecosystem.config.js'</span>\n     },\n     <span class=\"hljs-comment\">// ... otros procesos</span>\n   ]\n };\n</code></pre>","children":[],"payload":{"lines":"7,25"}}],"payload":{"lines":"5,27"}}],"payload":{"lines":"2,3"}},{"content":"Comandos Básicos y Avanzados","children":[{"content":"<strong>Iniciar:</strong> <code>pm2 start ecosystem.config.js</code>","children":[],"payload":{"lines":"28,29"}},{"content":"<strong>Listar:</strong> <code>pm2 list</code>","children":[],"payload":{"lines":"29,30"}},{"content":"<strong>Detener:</strong> <code>pm2 stop all</code>","children":[],"payload":{"lines":"30,31"}},{"content":"<strong>Reiniciar:</strong> <code>pm2 restart all</code>","children":[],"payload":{"lines":"31,32"}},{"content":"<strong>Monitoreo:</strong> <code>pm2 monit</code>","children":[],"payload":{"lines":"32,33"}},{"content":"<strong>Escalado:</strong> <code>pm2 scale my-app +2</code>","children":[],"payload":{"lines":"33,34"}},{"content":"<strong>Logs:</strong> <code>pm2 logs</code>","children":[],"payload":{"lines":"34,35"}},{"content":"<strong>Descripción:</strong> <code>pm2 describe 0</code>","children":[],"payload":{"lines":"35,36"}},{"content":"<strong>Ejecutar comandos:</strong> <code>pm2 exec 0 'node -e \"console.log(\\'Hola desde el proceso\\')\"'</code>","children":[],"payload":{"lines":"36,38"}}],"payload":{"lines":"27,28"}},{"content":"Características Principales","children":[{"content":"<strong>Clustering:</strong> Crear múltiples instancias para aprovechar múltiples núcleos de CPU.","children":[],"payload":{"lines":"39,40"}},{"content":"<strong>Daemonización:</strong> Ejecutar en segundo plano, incluso al cerrar la terminal.","children":[],"payload":{"lines":"40,41"}},{"content":"<strong>Reinicio automático:</strong> Reiniciar procesos que fallan.","children":[],"payload":{"lines":"41,42"}},{"content":"<strong>Watch:</strong> Monitorear cambios en archivos y reiniciar automáticamente.","children":[],"payload":{"lines":"42,43"}},{"content":"<strong>Balanceo de carga:</strong> Distribuir tráfico entre múltiples instancias.","children":[],"payload":{"lines":"43,45"}}],"payload":{"lines":"38,39"}},{"content":"Mejora de Gestión de Procesos","children":[{"content":"<strong>Manejo de fallos:</strong>","children":[{"content":"Reiniciar aplicaciones en caso de fallos:<pre><code class=\"language-bash\">pm2 start app.js --restart-delay 5000\n</code></pre>","children":[],"payload":{"lines":"47,51"}}],"payload":{"lines":"46,51"}},{"content":"<strong>Gestión de memoria:</strong>","children":[{"content":"Reiniciar aplicaciones que excedan el límite de memoria:<pre><code class=\"language-bash\">pm2 start app.js --max-memory-restart 300M\n</code></pre>","children":[],"payload":{"lines":"52,56"}}],"payload":{"lines":"51,56"}},{"content":"<strong>Rotación de logs:</strong>","children":[{"content":"Instalar y configurar la rotación de logs:<pre><code class=\"language-bash\">pm2 install pm2-logrotate\npm2 <span class=\"hljs-built_in\">set</span> pm2-logrotate:max_size 10M\npm2 <span class=\"hljs-built_in\">set</span> pm2-logrotate:retain 30\n</code></pre>","children":[],"payload":{"lines":"57,64"}}],"payload":{"lines":"56,64"}}],"payload":{"lines":"45,46"}},{"content":"Automatización y Recuperación","children":[{"content":"<strong>Automatización del inicio con el sistema operativo:</strong>","children":[{"content":"Configurar PM2 para iniciar automáticamente tras un reinicio del sistema:<pre><code class=\"language-bash\">pm2 startup\npm2 save\n</code></pre>","children":[],"payload":{"lines":"66,71"}}],"payload":{"lines":"65,71"}},{"content":"<strong>Monitoreo avanzado con PM2 Plus/Keymetrics:</strong>","children":[{"content":"Integración con <strong>PM2 Plus</strong> para obtener alertas y monitoreo en tiempo real.","children":[],"payload":{"lines":"72,73"}},{"content":"Acceso a métricas detalladas, consumo de CPU y memoria.","children":[],"payload":{"lines":"73,75"}}],"payload":{"lines":"71,75"}}],"payload":{"lines":"64,65"}},{"content":"Integración con Otras Herramientas","children":[{"content":"<strong>Docker:</strong>","children":[{"content":"<strong>Dockerfile:</strong><pre><code class=\"language-dockerfile\">FROM node:14\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nCMD [\"pm2\", \"start\", \"ecosystem.config.js\"]\n</code></pre>","children":[],"payload":{"lines":"77,86"}},{"content":"<strong>Orquestación:</strong> Docker Compose, Kubernetes","children":[],"payload":{"lines":"86,87"}}],"payload":{"lines":"76,87"}},{"content":"<strong>Kubernetes:</strong>","children":[{"content":"<strong>Deployment:</strong> (ver ejemplo anterior)","children":[],"payload":{"lines":"88,89"}},{"content":"<strong>Servicios:</strong> Exponer las aplicaciones a través de un servicio de Kubernetes","children":[],"payload":{"lines":"89,90"}}],"payload":{"lines":"87,90"}},{"content":"<strong>Keymetrics:</strong> Plataforma de monitoreo y gestión","children":[],"payload":{"lines":"90,91"}},{"content":"<strong>CI/CD:</strong> Jenkins, GitLab CI/CD, GitHub Actions","children":[],"payload":{"lines":"91,92"}},{"content":"<strong>Cloud Platforms:</strong> AWS, GCP, Azure","children":[],"payload":{"lines":"92,94"}}],"payload":{"lines":"75,76"}},{"content":"Ejemplos de Uso","children":[{"content":"<strong>Desarrollo local:</strong> Iniciar múltiples instancias de una aplicación para simular un entorno de producción.","children":[],"payload":{"lines":"95,96"}},{"content":"<strong>Producción:</strong> Implementar una aplicación Node.js en un servidor y gestionarla con PM2.","children":[],"payload":{"lines":"96,97"}},{"content":"<strong>Microservicios:</strong> Crear y gestionar múltiples microservicios con PM2.","children":[],"payload":{"lines":"97,98"}},{"content":"<strong>Aplicaciones sin servidor:</strong> Utilizar PM2 en combinación con funciones sin servidor para crear aplicaciones escalables.","children":[],"payload":{"lines":"98,100"}}],"payload":{"lines":"94,95"}},{"content":"Buenas Prácticas","children":[{"content":"<strong>Utilizar un archivo de configuración:</strong> Centralizar la configuración.","children":[],"payload":{"lines":"101,102"}},{"content":"<strong>Monitorear regularmente:</strong> Usar <code>pm2 monit</code> o Keymetrics.","children":[],"payload":{"lines":"102,103"}},{"content":"<strong>Rotar logs:</strong> Limitar tamaño de archivos.","children":[],"payload":{"lines":"103,104"}},{"content":"<strong>Automatizar despliegues:</strong> Integrar con CI/CD.","children":[],"payload":{"lines":"104,105"}},{"content":"<strong>Seguridad:</strong> Restringir acceso, usar contraseñas seguras.","children":[],"payload":{"lines":"105,107"}}],"payload":{"lines":"100,101"}},{"content":"Conceptos Clave","children":[{"content":"<strong>Proceso:</strong> Instancia en ejecución","children":[],"payload":{"lines":"108,109"}},{"content":"<strong>Daemon:</strong> Proceso en segundo plano","children":[],"payload":{"lines":"109,110"}},{"content":"<strong>Cluster:</strong> Grupo de procesos","children":[],"payload":{"lines":"110,111"}},{"content":"<strong>Balanceo de carga:</strong> Distribución de tráfico","children":[],"payload":{"lines":"111,112"}},{"content":"<strong>Ecosystem:</strong> Conjunto de aplicaciones definidas en un archivo de configuración","children":[],"payload":{"lines":"112,114"}}],"payload":{"lines":"107,108"}},{"content":"Ejemplos más detallados:","children":[{"content":"<strong>Escalado automático con Kubernetes:</strong> Utilizar HPA (Horizontal Pod Autoscaler) para escalar automáticamente el número de réplicas de un Deployment en función de la carga.","children":[],"payload":{"lines":"115,116"}},{"content":"<strong>Gestión de logs con Elasticsearch y Kibana:</strong> Enviar los logs de PM2 a Elasticsearch para realizar análisis y visualización con Kibana.","children":[],"payload":{"lines":"116,117"}},{"content":"<strong>Implementación de una aplicación Node.js en AWS ECS:</strong> Crear un servicio ECS con una tarea que ejecute PM2 y configurar el balanceo de carga.","children":[],"payload":{"lines":"117,118"}},{"content":"<strong>Creación de una pipeline de CI/CD con GitLab CI/CD:</strong> Automatizar la construcción, prueba y despliegue de la aplicación utilizando PM2.","children":[],"payload":{"lines":"118,119"}}],"payload":{"lines":"114,115"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
