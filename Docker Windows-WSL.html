<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.3-alpha.1/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.3-alpha.1/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:q,mm:v}=window,j=new q.Toolbar;j.attach(v);const we=j.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((f,d,h,u)=>{const g=f();window.mm=g.Markmap.create("svg#mindmap",(d||g.deriveOptions)(u),h)})(()=>window.markmap,null,{"content":"Mapa Mental del Proceso Completo","children":[{"content":"1. <strong>Preparación y Carga del Contenedor Docker</strong>","children":[{"content":"<strong>Crear un archivo <code>.tar</code></strong>:","children":[{"content":"Se utiliza el comando <code>docker save -o point-of-sale-app-api.tar point-of-sale-app-api:latest</code> para guardar la imagen en formato <code>.tar</code>.","children":[],"payload":{"lines":"4,5"}},{"content":"Archivo generado: <code>point-of-sale-app-api.tar</code>.","children":[],"payload":{"lines":"5,6"}}],"payload":{"lines":"3,6"}},{"content":"<strong>Ubicación del archivo</strong>:","children":[{"content":"El archivo <code>.tar</code> está en <code>C:\\temp</code> en Windows.","children":[],"payload":{"lines":"7,8"}}],"payload":{"lines":"6,8"}},{"content":"<strong>Copiar el archivo a WSL</strong>:","children":[{"content":"Se copia el archivo desde Windows a <code>/mnt/c/temp</code> dentro de WSL.","children":[],"payload":{"lines":"9,10"}},{"content":"Comando: <code>cp /mnt/c/temp/point-of-sale-app-api.tar /mnt/c/temp</code>.","children":[],"payload":{"lines":"10,12"}}],"payload":{"lines":"8,12"}}],"payload":{"lines":"2,3"}},{"content":"2. <strong>Configuración del Docker Compose</strong>","children":[{"content":"<strong>Crear archivo <code>docker-compose.yml</code></strong>:","children":[{"content":"<strong>Contenido</strong>:<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">db:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">postgres:17</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">postgres_db</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-attr\">POSTGRES_USER:</span> <span class=\"hljs-string\">postgres</span>\n      <span class=\"hljs-attr\">POSTGRES_PASSWORD:</span> <span class=\"hljs-string\">3az5bkhr</span>\n      <span class=\"hljs-attr\">POSTGRES_DB:</span> <span class=\"hljs-string\">verduleria_db</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db_data:/var/lib/postgresql/data</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"5432:5432\"</span>\n\n  <span class=\"hljs-attr\">api:</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">node-api</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-attr\">DATABASE_URL:</span> <span class=\"hljs-string\">postgres://postgres:3az5bkhr@db:5432/verduleria_db</span>\n      <span class=\"hljs-attr\">NODE_ENV:</span> <span class=\"hljs-string\">production</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"3000:3000\"</span>\n    <span class=\"hljs-attr\">depends_on:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">db</span>\n\n<span class=\"hljs-attr\">volumes:</span>\n  <span class=\"hljs-attr\">db_data:</span>\n</code></pre>","children":[],"payload":{"lines":"14,42"}}],"payload":{"lines":"13,42"}},{"content":"<strong>Ubicación del archivo</strong>: Se crea en <code>/mnt/c/temp/docker-compose.yml</code>.","children":[],"payload":{"lines":"42,44"}}],"payload":{"lines":"12,13"}},{"content":"3. <strong>Problema de Puerto 5432 en Docker</strong>","children":[{"content":"<strong>Solución</strong>:","children":[{"content":"Se detiene el servicio de PostgreSQL en WSL: <code>sudo systemctl stop postgresql</code>.","children":[],"payload":{"lines":"46,47"}},{"content":"Ahora, el puerto 5432 está libre para el contenedor Docker.","children":[],"payload":{"lines":"47,49"}}],"payload":{"lines":"45,49"}}],"payload":{"lines":"44,45"}},{"content":"4. <strong>Ejecución del Contenedor Docker</strong>","children":[{"content":"<strong>Comando de ejecución</strong>:","children":[{"content":"<code>docker run -d -p 3000:3000 -p 5432:5432 point-of-sale-app-api:latest</code>.","children":[],"payload":{"lines":"51,52"}}],"payload":{"lines":"50,52"}},{"content":"<strong>Estado exitoso</strong>:","children":[{"content":"El contenedor se levanta correctamente en los puertos 3000 y 5432.","children":[],"payload":{"lines":"53,55"}}],"payload":{"lines":"52,55"}}],"payload":{"lines":"49,50"}},{"content":"5. <strong>Ejecución del Docker Compose</strong>","children":[{"content":"<strong>Comando de ejecución</strong>:","children":[{"content":"<code>docker-compose -f /mnt/c/temp/docker-compose.yml up -d</code>.","children":[],"payload":{"lines":"57,58"}}],"payload":{"lines":"56,58"}},{"content":"<strong>Éxito</strong>: El contenedor de la API y la base de datos se levantan sin problemas.","children":[],"payload":{"lines":"58,60"}}],"payload":{"lines":"55,56"}},{"content":"6. <strong>Acceso a la Base de Datos PostgreSQL</strong>","children":[{"content":"<strong>Acceder a contenedor de PostgreSQL</strong>:","children":[{"content":"<code>docker exec -it postgres_db bash</code>.","children":[],"payload":{"lines":"62,63"}}],"payload":{"lines":"61,63"}},{"content":"<strong>Restaurar base de datos desde archivo de respaldo</strong>:","children":[{"content":"Se copia el archivo de respaldo desde Windows a Docker:<pre><code class=\"language-bash\">docker <span class=\"hljs-built_in\">cp</span> /mnt/c/temp/respaldo.backup postgres_db:/tmp/respaldo.backup\n</code></pre>","children":[],"payload":{"lines":"64,68"}},{"content":"Restaurar base de datos:<pre><code class=\"language-bash\">pg_restore -U postgres -d verduleria_db /tmp/respaldo.backup\n</code></pre>","children":[],"payload":{"lines":"68,72"}},{"content":"Comando para verificar tablas:<pre><code class=\"language-bash\">psql -U postgres -d verduleria_db\n\\dt\n</code></pre>","children":[],"payload":{"lines":"72,78"}}],"payload":{"lines":"63,78"}}],"payload":{"lines":"60,61"}},{"content":"7. <strong>Problemas y Soluciones</strong>:","children":[{"content":"<strong>Problema 1</strong>: No se podía acceder al contenedor como <code>root</code>.","children":[{"content":"Solución: Se solucionó al cambiar la contraseña y verificar el grupo del usuario <code>mquiros</code>.","children":[],"payload":{"lines":"80,81"}}],"payload":{"lines":"79,81"}},{"content":"<strong>Problema 2</strong>: Confusión con el puerto 5432 ya en uso.","children":[{"content":"Solución: Se detuvo el servicio PostgreSQL en WSL para liberar el puerto.","children":[],"payload":{"lines":"82,83"}}],"payload":{"lines":"81,83"}},{"content":"<strong>Problema 3</strong>: La base de datos no contenía datos.","children":[{"content":"Solución: Se restauró la base de datos desde un respaldo existente en Windows.","children":[],"payload":{"lines":"84,85"}}],"payload":{"lines":"83,85"}},{"content":"<strong>Éxito</strong>: Contenedor en ejecución correctamente y accesible desde el navegador en Windows.","children":[],"payload":{"lines":"85,87"}}],"payload":{"lines":"78,79"}},{"content":"8. <strong>Resultado Final</strong>","children":[{"content":"<strong>Contenedor levantado correctamente</strong> en WSL.","children":[],"payload":{"lines":"88,89"}},{"content":"<strong>API accesible</strong> a través de <code>http://localhost:3000</code>.","children":[],"payload":{"lines":"89,90"}},{"content":"<strong>Base de datos accesible</strong> en <code>localhost:5432</code>.","children":[],"payload":{"lines":"90,91"}},{"content":"El proyecto está listo para funcionar en el entorno Dockerizado.","children":[],"payload":{"lines":"91,92"}}],"payload":{"lines":"87,88"}}],"payload":{"lines":"0,1"}},null)</script>
</body>
</html>
